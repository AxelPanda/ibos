/*! IBOS_Revolution2014-03-22 */
var Ibos=Ibos||{};Ibos.print=function(){console&&console.log(arguments)},Ibos.time=function(a,b,c){console.time(a||"untitle");for(var d=0;(b||1e3)>d;d++)c();console.timeEnd(a||"untitle")},Ibos.app=function(){var a={},b={};return a.s=a.setPageParam=function(a,c){"string"==typeof a?b[a]=c:$.extend(b,a)},a.g=a.getPageParam=function(a,c){return"undefined"!=typeof b[a]?b[a]:"undefined"!=typeof G&&"undefined"!=typeof G[a]?G[a]:c?c:null},a.url=function(a,b){return a+="",3===a.split("/").length?(b=b?"&"+$.param(b):"",this.g("SITE_URL")+"?r="+a+b):void 0},a.getStaticUrl=function(a){return(this.g("STATIC_URL")||"")+(a||"")},a.getEvtParams=function(a){var b=$.attr(a,"data-param");return b?$.parseJSON(b):{}},a.guide=function(a,b){$.ajax({url:Ibos.app.url("main/default/moduleGuide"),type:"post",data:{id:a,op:"checkHasGuide"},dataType:"json",success:function(a){a.hasGuide||b&&b(a)}})},a.finishGuide=function(a){$.post(Ibos.app.url("main/default/moduleGuide"),{id:a,op:"finishGuide"})},a.resetGuide=function(){Ibos.local.remove("guided")},a}(),Ibos.Event=function(a,b,c){var d=this;b=b||"click",c=c||b,a=a&&a.length?a:$(document),a.on(b,"[data-"+c+"]",function(){var a=$.attr(this,"data-"+c),b=Ibos.app.getEvtParams(this);d.fire(a,b,$(this))}),this._evts={}},Ibos.Event.prototype={constructor:Ibos.Event,has:function(a){return a in this._evts&&$.isFunction(this._evts[a])},add:function(a,b){"string"==typeof a?this._evts[a]=b:(b=a,$.extend(this._evts,b))},remove:function(a){delete this._evts[a]},fire:function(a,b,c){this.has(a)&&this._evts[a].call(this._evts.click,b,c)}},Ibos.events=new Ibos.Event,Ibos.evt=function(){var a={},b={add:function(b,c){"string"!=typeof b&&(c=b,b="click"),a[b]||(a[b]={},$(document).on(b+".ink","[data-action]",function(c){var d=$.attr(this,"data-action"),e=Ibos.app.getEvtParams(this);a[b][d]&&a[b][d].call(this,e,this,c)})),$.extend(a[b],c)},remove:function(b,c){c=c||"click",a[c]&&a[c][b]&&(delete a[c][b],$.isEmptyObject(a[c])&&(delete a[c],$(document).off(c+".ink")))},get:function(b,c){return c=c||"click",a[c]&&a[c][b]?a[c][b]:void 0},fire:function(b,c){var d=Array.prototype.slice.call(arguments,2);return c=c||"click",a[c]&&a[c][b]?a[c][b].apply(null,d):void 0}};return b}(),Ibos.core={inherits:function(a,b){var c=function(){};return c.prototype=b.prototype,a.prototype=$.extend(new c,{_super:b,constructor:a},a.prototype),c.prototype=null,a}},function(a,b){var c=Array.prototype.slice,d=function(a){var d;return b.isFunction(a)?(d=c.call(arguments,1),a.apply(this,d)):void 0};a.Dom=Ibos.Dom=function(){var a={byId:function(a){return document.getElementById(a)||null},getElem:function(a,c){var d,e=!1;return"string"==typeof a?d=document.getElementById(a):(d=a,a&&!a.nodeType&&(e=!0)),c?e?d:b(d):e?d[0]:d}};return a}(),function(){var c={isUnd:function(a){return void 0===a},reg:{positiveInt:/^[1-9]\d*$/,url:/^(http[s]?:\/\/)?([\w-]+\.)+[\w-]+([\w-.\/?%&=]*)?$/,email:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$"/,zipcode:/^\d{6}$/,notempty:/\S+/},regex:function(a,b){return b&&this.reg[b]&&this.reg[b].test(a)?!0:!1},isPositiveInt:function(a){return this.regex(""+a,"positiveInt")}};c.setCookie=function(a,b,c,d,e,f){var g=2592e3;expires=new Date,(""===b||0>c)&&(c=-g),c=this.isUnd(c)?g:c,d=d||Ibos.app.g("cookiePath")||"",e=e||Ibos.app.g("cookieDomain")||"",expires.setTime(expires.getTime()+1e3*c),document.cookie=escape((Ibos.app.g("cookiePre")||"")+a)+"="+escape(b)+(expires?"; expires="+expires.toGMTString():"")+(d?"; path="+d:"/")+(e?"; domain="+e:"")+(f?"; secure":"")},c.getCookie=function(a,b){a=(Ibos.app.g("cookiePre")||"")+a;var c=document.cookie.indexOf(a),d=document.cookie.indexOf(";",c);if(-1==c)return"";var e=document.cookie.substring(c+a.length+1,d>c?d:document.cookie.length);return b?e:unescape(e)},c.clearCookie=function(){var a=/[^ =;]+(?=\=)/g,b=document.cookie.match(a);if(b)for(var c=b.length;c--;)document.cookie=b[c]+"=0;expires="+new Date(0).toUTCString()},c.keys=Object.keys||function(a){a=Object(a);var b=[];for(var c in a)b.push(c);return b},c.invertKeys=function(a){a=Object(a);var b={};for(var c in a)b[a[c]]=c;return b},c.getCharLength=function(){var a=function(a){if("undefined"==typeof a)return 0;var b=a.match(/[^\x00-\x80]/g);return a.length+(b?b.length:0)};return function(c,d){d=d||{},d.max=d.max||140,d.surl=d.surl||20;var e=b.trim(c).length;if(e>0){for(var f=c.match(/(http|https):\/\/[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z\$\.\+\!\_\*\(\)\/\,\:;@&=\?~#%]*)*/gi)||[],g=0,h=0,i=f.length;i>h;h++){var j=a(f[h]);g+=j<=d.max?d.surl:j-d.max+d.surl,c=c.replace(f[h],"")}return Math.ceil((g+a(c))/2)}return 0}}(),c.entity=function(){function a(a){return"string"!=typeof a?"":a.replace(d.escape,function(a){return b.escape[a]})}var b={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"}};b.unescape=c.invertKeys(b.escape);var d={escape:RegExp("["+c.keys(b.escape).join("")+"]","g"),unescape:RegExp("("+c.keys(b.unescape).join("|")+")","g")};return{escape:a,unescape:a}}(),c.urlToObj=function(a){var b,c={};if(a){b=a.split("&");for(var d=0,e=b.length;e>d;d++){var f=b[d].split("=");c[f[0]]=f[1]}}return c},c.loadImage=function(a,b,c){var e=new Image,f=!1;e.onload=function(){e.onload=e.onerr=null,!f&&d(b,e),f=!0},e.onerror=function(){e.onload=e.onerror=null,d(c,e)},e.src=a,e.complete&&(f=!0,d(b,e))},c.loadFile=function(){function a(a,c){try{for(var d,e=0;d=b[e++];)if(d.doc===a&&d.url==(c.src||c.href))return d}catch(f){return null}}var b=[];return function(c,d,e){var f=a(c,d);if(f)return void(f.ready?e&&e():f.funs.push(e));if(b.push({doc:c,url:d.src||d.href,funs:[e]}),!c.body){var g=[];for(var h in d)"tag"!=h&&g.push(h+'="'+d[h]+'"');return void c.write("<"+d.tag+" "+g.join(" ")+" ></"+d.tag+">")}if(!d.id||!c.getElementById(d.id)){var i=c.createElement(d.tag);delete d.tag;for(var h in d)i.setAttribute(h,d[h]);i.onload=i.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(f=a(c,d),f.funs.length>0){f.ready=1;for(var b;b=f.funs.pop();)b()}i.onload=i.onreadystatechange=null}},i.onerror=function(){throw Error("The load "+(d.href||d.src)+" fails,check the url settings of file editor_config.js ")},c.getElementsByTagName("head")[0].appendChild(i)}}}(),c.delayImage=function(a,c){b("[data-src]",a).each(function(){var a=b(this),e=a.parent();e.waiting(null,"mini"),a.on("load",function(){e.stopWaiting(),d(c,a)}).attr("src",a.attr("data-src"))})},c.getFormData=function(a,c){var d={},e=b.extend({name:"name",value:"value"},c);return b("["+e.name+"]",a).each(function(){var a=b(this),c=a.attr(e.name),f="value"===e.value?a.val():a.attr(e.value);c&&(d[c]=f)}),d},c.serializedToObject=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].name]=a[c].value;return b},c.getChecked=function(a,c){return b("input[type='checkbox'][name='"+a+"']:checked",c)},c.getCheckedValue=function(a,b){var c=this.getChecked(a,b);return c.map(function(){return this.value}).get().join(",")},c.lang=function(a,c){var d=L;if(!d)throw Error("U.lang: 语言包未定义");a=(a||"").split(".");for(var e,f=0;(e=a[f++])&&(d=d[e],d););return c?c===!0?b.template(d,L):b.template(d,c):d},c.uniqid=function(a,b){"undefined"==typeof a&&(a="");var c,d=function(a,b){return a=parseInt(a,10).toString(16),b<a.length?a.slice(a.length-b):b>a.length?Array(1+(b-a.length)).join("0")+a:a};return this.uniqidSeed||(this.uniqidSeed=Math.floor(123456789*Math.random())),this.uniqidSeed++,c=a,c+=d(parseInt((new Date).getTime()/1e3,10),8),c+=d(this.uniqidSeed,5),b&&(c+=(10*Math.random()).toFixed(8).toString()),c},a.U=Ibos.Util=c}(),function(){var c=function(a,b,c){this.$ctrl=a,this.$menu=b,this.options=c||{},this._init()};c.prototype={constructor:c,_init:function(){return this.$menu&&this.$menu.length?(this._initSelected(),void this._bindSelectEvent()):!1},_initSelected:function(){var a=this.$ctrl.attr("data-selected");"undefined"!=typeof a&&this.select(a,!0)},_bindSelectEvent:function(){var a=this;this.$menu.on("click","li",function(){var c=b.attr(this,"data-value");a.select(c)})},_setSelectedValue:function(a,c){var d="";this.$ctrl.attr("data-selected",a),this.selectedValue=a,d=this.options.template?b.template(this.options.template,{text:c}):c,this.$ctrl.html(d)},_getItemText:function(a){return a.attr("data-text")||a.text()},select:function(a,c){var d=this;return a===this.selectedValue?!1:(c=c===!1?!1:!0,void this.$menu.find("li").each(function(){var e,f=b(this),g=b.attr(this,"data-value");b(this).removeClass("active"),g&&a===g&&(b(this).addClass("active"),c&&(e=d._getItemText(f),d._setSelectedValue(g,e),d.$ctrl.trigger({type:"select",selected:g,selectedItem:f}))),""===a&&(d._setSelectedValue("",""),d.$ctrl.trigger({type:"select",selected:"",selectedItem:null}))}))},reset:function(){this.select("")}},b(function(){b(document).find("[data-toggle='dropdown'][data-toggle-role='select']").each(function(){var a=b(this),d=a.siblings(".dropdown-menu");a.data("select",new c(a,d))})});var e=function(a,c){this.$el=a,this.options=b.extend({},e.defaults,c),this._init()};e.defaults={color:"",bold:!1,italic:!1,underline:!1,onSetColor:null,onSetBold:null,onSetItalic:null,onSetUnderline:null},e.prototype={_init:function(){this._initContainer(),this._createBtns()},_initContainer:function(){var a=this.$el,b="editor-btnbar";a.addClass(b)},_createBtns:function(){this.colorBtn=this._createColorBtn(),this.boldBtn=this._createBoldBtn(),this.italicBtn=this._createItalicBtn(),this.underlineBtn=this._createUnderlineBtn(),this.$el.append(this.colorBtn,this.boldBtn,this.italicBtn,this.underlineBtn)},_createBtn:function(){return b('<a href="javascript:;" class="editor-btn">')},_createNormalBtn:function(a,b){var c=this._createBtn();return this.options[a]&&c.addClass("active"),"function"==typeof b&&c.on("click",b),c},_createColorBtn:function(){var a=this,b=this._createBtn();return this.options.color&&b.css("background-color","#"+this.options.color),b.colorPicker({mode:"simple",onPick:function(b,c){a.setColor(b,c)}}),b},_createBoldBtn:function(){var a=this,b=this._createNormalBtn("bold",function(){a.setBold(!a.options.bold)});return b.css("font-weight",700).html("B").attr("title","粗体"),b},_createItalicBtn:function(){var a=this,b=this._createNormalBtn("italic",function(){a.setItalic(!a.options.italic)});return b.css("font-style","italic").html("I").attr("title","斜体"),b},_createUnderlineBtn:function(){var a=this,b=this._createNormalBtn("underline",function(){a.setUnderline(!a.options.underline)});return b.css("text-decoration","underline").html("U").attr("title","下划线"),b},_setStatus:function(a,b,c){var e=b?"addClass":"removeClass",f=a.hasClass("active");b!==f&&a[e]("active"),d.call(this,c,b)},setColor:function(a,b){b=a?b:"",this.colorBtn.css("background-color",a).attr("title",b),this.options.color=a,d.call(this,this.options.onSetColor,a,b)},setBold:function(a){0===arguments.length&&(a=!0),a=!!a,this._setStatus(this.boldBtn,a,function(a){this.options.bold=a,d.call(this,this.options.onSetBold,a)})},setItalic:function(a){0===arguments.length&&(a=!0),a=!!a,this._setStatus(this.italicBtn,a,function(a){this.options.italic=a,d.call(this,this.options.onSetItalic,a)})},setUnderline:function(a){0===arguments.length&&(a=!0),a=!!a,this._setStatus(this.underlineBtn,a,function(a){this.options.underline=a,d.call(this,this.options.onSetUnderline,a)})}};var f=function(a,c,d){var e=this;this.$context=a&&a.length?a:b(document.body),this.selector=c||"a",this.callback=d,a.on("click",c,function(){e._tab(b(this),d)})};f.prototype={constructor:f,_tab:function(a,c){var e=a.attr("data-target"),f=b(e);f.show().siblings().hide(),d.call(this,c,a,f)},on:function(a){var b=this.$context.find("[data-target='"+a+"']");this._tab(b,this.callback)}};var g=function(a){return new f(a,"a",function(a){a.parent().addClass("active").siblings().removeClass("active")})};a.P=Ibos.Plugins={PseudoSelect:c,SimpleEditor:e,Tab:f,commonTab:g}}(),function(){var c={};!function(a){return a?void(c.tip=function(a,c){return b.jGrowl(a,{theme:c||"success"})}):!1}(b.jGrowl||top.$.jGrowl),function(a){a&&b.extend(c,{dialog:a,alert:a.alert,confirm:a.confirm,prompt:a.prompt,tips:a.tips,ajaxDialog:a.load,openFrame:a.open,getDialog:a.get,closeDialog:function(b){if("undefined"==typeof b)for(var c in a.list)a.list.hasOwnProperty(c)&&a.list[c].close();else{var d=this.getDialog(b);d&&d.close()}}})}(b.artDialog||top.$.artDialog),c.Menu=function(){var a=0,c={},d=function(e,f){var g=this;this.$menu=Dom.getElem(e,!0);var h=this.options=b.extend({},d.defaults,f);if(h.id){if(c[h.id])return c[h.id];c[h.id]=this,this.id=h.id}else this.id="menu"+a++,c[this.id]=this;this.$menu.css("position","absolute").hide(),this.showing=!1,this.zIndex(h.zIndex),h.autoHide&&this.$menu.on({mouseenter:function(){g._stopDelay("hide")},mouseleave:function(){g.hide(g.options.autoHide)}}),U.isUnd(h.content)||"string"!=typeof h.content&&1!==h.content.nodeType||this.$menu.html(h.content),h.clickToHide&&b(document).on("mousedown",function(a){g.$menu[0]===a.target||b.contains(g.$menu[0],a.target)||g.hide()}),h.addClass&&this.$menu.addClass(h.addClass)};return d.defaults={animate:!1,zIndex:1e3},d._access=function(a,b){if(U.isUnd(a)){for(var d in c)c.hasOwnProperty(d)&&b.call(c[d]);return c}return a in c?(b.call(c[a]),c[a]):null},d.show=function(a){this._access(a,function(){this.show()})},d.hide=function(a){this._access(a,function(){this.hide()})},d.getIns=function(a){return a?c[a]:c},d.prototype={constructor:d,position:function(a){return this.$menu.position(b.extend({of:document.body},a)),this},zIndex:function(a){return this.$menu.css("z-index",a),this},show:function(){var a=this,b=this.options;return this.showing?this:(U.isUnd(b.content)||"function"!=typeof this.options.content||this.$menu.html(this.options.content.call(this)||""),this.showing=!0,b.animate?(this.$menu.fadeTo(0,0).show().trigger("show").fadeTo(200,1),b.show&&b.show.call(this)):(this.$menu.show().trigger("show"),b.show&&b.show.call(this)),this.position(b.position),b.autoHide&&setTimeout(function(){a.hide()},b.autoHide),this)},hide:function(){return this.showing=!1,this.options.animate?(this.$menu.fadeOut(200).trigger("hide"),this.options.hide&&this.options.hide.call(this)):(this.$menu.hide().trigger("hide"),this.options.hide&&this.options.hide.call(this)),this},setContent:function(a){return this.$menu.html(a),this.position(this.options.position),this}},d}(),c.PopMenu=function(a,d,e){if(!a||!a.length)return!1;"click"===e.trigger&&(e.hideDelay=e.hideDelay?e.hideDelay:0,e.showDelay=e.showDelay?e.showDelay:0),this._super.call(this,d,b.extend(!0,{},c.PopMenu.defaults,e)),this.$ctrl=a;var f,g=this;this.options.position.of||(this.options.position.of=this.$ctrl);var h=function(){clearTimeout(f),f=setTimeout(function(){g.show()},g.options.showDelay)},i=function(){clearTimeout(f),f=setTimeout(function(){g.hide()},g.options.hideDelay)};"hover"===this.options.trigger?(this.$ctrl.on({"mouseenter.popmenu":h,"mouseleave.popmenu":i}),this.$menu.on({"mouseenter.popmenu":function(){clearTimeout(f)},"mouseleave.popmenu":i})):"click"===this.options.trigger&&this.$ctrl.on("click.popmenu",function(){g.showing?i():h()})},Ibos.core.inherits(c.PopMenu,c.Menu),c.PopMenu.defaults={position:{at:"left bottom",my:"left top"},trigger:"hover",showDelay:500,hideDelay:500},b.extend(c,{setLinkage:function(a,b,c){return},modal:{show:function(a){var c=b.extend({backgroundColor:"#FFF",opacity:".7",zIndex:"2000"},a);this.$modal&&this.$modal.length||(this.$modal=b("<div style='position:fixed; top:0; left:0; width:100%; height:100%; overflow:hidden'></div>").css("z-index",c.zIndex).hide().appendTo(document.body),b("<div style='height:100%;'></div>").css(c).appendTo(this.$modal),this.$modal.fadeIn(200).on("mousedown",function(a){a.stopPropagation(),a.preventDefault()}))},hide:function(){var a=this.$modal;a&&a.fadeOut(200,function(){a.remove(),c.modal.$modal=null})},toggle:function(){this.$modal?this.hide():this.show()}},focusForm:function(a,c,d){var e;c=c||"input, textarea, select",d=d===!1?!1:!0,e=b(c,a).eq(0).focus(),d&&e.parent().addClass("has-focus")},popover:function(a,c){a.popover(b.extend({template:'<div class="popover popover-w"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',placement:"bottom"},c))},scrollYTo:function(c,d,e){var f=b(a.opera?"CSS1Compat"===document.compatMode?"html":"body":"html,body"),g=Dom.getElem(c,!0),h=g.offset().top+(d||0);f.animate({scrollTop:h},500,e)},scrollToTop:function(a){this.scrollYTo(b(document.body),0,a)},selectOne:function(a,b){b=b||a[0].nodeName,a.addClass("active").siblings(b).removeClass("active")},fillHeight:function(a,c){var d,e,f;for(a=e=Dom.getElem(a,!0),c=Dom.getElem(c,!0),f=a.parent(),d=c.height();f&&f.length&&(b.isWindow(c[0])?"html"!==f[0].nodeName.toLowerCase():f[0]!==c[0]);)d-=f.outerHeight()-e.outerHeight(),e=f,f=f.parent();a.css("min-height",d)},openFullWindow:function(b,c,d){d=d?d:"menubar=0,toolbar=0,status=0,resizable=1,scrollbars=1",d+=",top=0,left=0,height="+screen.availHeight+",width="+screen.availWidth,a.open(b,c,d)}}),c.showPrompt=function(a,b){return c.dialog({id:"prompt",padding:0,title:!1,cancel:!1,zIndex:9999}).content("<div class='prompt'>"+(a||"")+"</div>").time(b||1.5)},c.showCreditPrompt=function(){var a,b,d=U.getCookie("creditremind").split("D"),e=(U.getCookie("creditbase").split("D"),decodeURI(U.getCookie("creditrule",!0)).replace(String.fromCharCode(9)," ")),f=[],g="",h=function(){U.setCookie("creditremind",""),U.setCookie("creditbase",""),U.setCookie("creditrule","")},i=function(a,b,c){for(var d="",e=1;5>=e;e++)"0"!=c[e]&&b[e]&&(d+="<span>"+b[e]+" <strong> "+(c[e]>=0?"+":"")+c[e]+"</strong></span> ");return d&&(d='<div class="point-tip"><div class="point-tip-title mbs">'+a+'</div><div class="point-tip-body">'+d+"</div></div>"),d};if(!Ibos.app.g("uid")||d.length<2||d[6]!==Ibos.app.g("uid"))return void h();a=Ibos.app.g("creditRemind").split(",");for(var j=0;j<a.length;j++)b=a[j].split("|"),f[b[0]]=b[1];g=i(e,f,d),g&&c.showPrompt(g),h()},c.showPmDialog=function(a,d,e){var f='<div style="width: 500px;"><form><table class="table table-condensed"><tr><td class="xar" width="50">'+U.lang("RECEIVER")+'</td><td><input type="text" name="touid" data-toggle="userSelect"><div></div></td></tr><tr><td class="xar vat">'+U.lang("CONTENT")+'</td><td><textarea name="content" rows="5" ></textarea></td></tr></table><input type="hidden" name="formhash" value="'+Ibos.app.g("formHash")+'" /></form></div>',g=function(a){return""===a[0].value?(c.tip(U.lang("RECEIVER_CANNOT_BE_EMPTY"),"danger"),!1):""===b.trim(a[1].value)?(c.tip(U.lang("CONTENT_CANNOT_BE_EMPTY"),"danger"),!1):!0};sendPmForm=function(a,e){var f=b.extend({data:a,type:"post",dataType:"json",success:function(a){a.isSuccess||a.IsSuccess?c.tip(a.data):c.tip(a.data,"danger"),e&&e(a)}},d);b.ajax(f)},c.dialog({id:"pm_dialog",title:U.lang("SEND_PM"),content:f,padding:0,lock:!0,init:function(){var c=this,d=c.DOM.content,f=d.find("[data-toggle='userSelect']"),g=b.extend({type:"user",maximumSelectionSize:"1",data:Ibos.data.get("user")},e);f.val(a),f.userSelect(g)},ok:function(){var a=this,b=a.DOM.content,c=b.find("form").eq(0),d=c.serializeArray();return g(d)&&sendPmForm(d,function(){a.close()}),!1},okVal:U.lang("SEND"),zIndex:6500,cancel:!0})},a.Ui=b.extend(a.Ui,c)}(),b.extend(Ibos,{date:{format:function(a,b){a=null==a?new Date:"number"==typeof a?new Date(a):a,b=b||"yyyy-mm-dd";var c={yy:(""+a.getUTCFullYear()).substring(2),yyyy:a.getUTCFullYear(),m:a.getUTCMonth()+1,d:a.getUTCDate(),h:a.getUTCHours(),i:a.getUTCMinutes(),s:a.getUTCSeconds()};c.H=c.h%12==0?12:c.h%12,c.HH=(c.H<10?"0":"")+c.H,c.hh=(c.h<10?"0":"")+c.h,c.ii=(c.i<10?"0":"")+c.i,c.ss=(c.s<10?"0":"")+c.s,c.dd=(c.d<10?"0":"")+c.d,c.mm=(c.m<10?"0":"")+c.m;for(var d in c)if(c.hasOwnProperty(d)){var e=new RegExp("\\b"+d+"\\b","g");b=b.replace(e,c[d])}return b},calc:function(a,b){var c=864e5,a=a||new Date;return b=b||0,new Date(a.setTime(a.getTime()+b*c))},numberToTime:function(a){if(a=parseFloat(a,10),0>a||a>24)return!1;var b=parseInt(a,10),c=a-b,d=b>9?b:"0"+b,e=parseInt(60*c);return e=e>9?e:"0"+e,d+":"+e}},string:{removeHtmlTag:function(a){return a.replace(/<\/?[^>]*>/g,"")},utf16to8:function(a){var b,c,d,e;for(b="",d=a.length,c=0;d>c;c++)e=a.charCodeAt(c),e>=1&&127>=e?b+=a.charAt(c):e>2047?(b+=String.fromCharCode(224|e>>12&15),b+=String.fromCharCode(128|e>>6&63),b+=String.fromCharCode(128|e>>0&63)):(b+=String.fromCharCode(192|e>>6&31),b+=String.fromCharCode(128|e>>0&63));return b}},number:{},local:{set:function(c,d){return a.localStorage.setItem(c,b.toJSON(d))},get:function(c){var d=a.localStorage.getItem(c);return null===d?null:b.parseJSON(d)},remove:function(b){return a.localStorage.removeItem(b)},clear:function(){return a.localStorage.clear()}},simulateCheck:function(a,b,c){new P.Tab(a,b,function(b){var e=b.parent(),f=b.find("input"),g=f.attr("type"),h=f.prop("checked");return"radio"===g?e.hasClass("active")||(e.addClass("active").siblings().removeClass("active"),f.prop("checked",!0)):"checkbox"===g&&(e.toggleClass("active"),f.prop("checked",!h)),d(c,b,f),a})},matchSpell:function(a,c){var d,e,f,g=!1,h=0;if(!a||!c)return!1;f=pinyinEngine.toPinyin(c,!1,","),f="string"==typeof f?f:f[0],g=-1!==(c+","+f.toLowerCase()).indexOf(a.toLowerCase());var i=function(a,c){for(var d=0;d<c.length;d++)if(b.isArray(c[d])){if(i(a,c[d]))return!0}else if(c[d].charAt(0)===a)return h=d,!0;return!1},j=function(a,c){for(var d=0;d<c.length;d++)if(b.isArray(c[d])){if(j(a,c[d]))return!0}else if(c[h+1]&&c[h+1].charAt(0)===a)return h++,!0;return!1};if(!g){d=pinyinEngine.toPinyin(c,!1),e=a.split("");for(var k=0;k<e.length;k++)if(g=0===k?i(e[k],d):j(e[k],d),!g)return!1}return g},atwho:function(a,c){c=c||{},opts=b.extend({at:"@",data:Ibos.data&&Ibos.data.get("user")||[],tpl:"<li data-value='${name}'><img src='${imgUrl}' height='20' width='20'/> ${name} </li>",callbacks:{filter:function(a,b,c){var d,e,f,g;if(g=[],""===a)return!1;for(e=0,f=b.length;f>e;e++)d=b[e],~d[c].toLowerCase().indexOf(a)?g.push(d):Ibos.matchSpell(a,d[c])&&g.push(d);return g},remote_filter:function(a,d){var e;e=[],""===a&&c.url&&b.ajax({url:c.url,type:"get",dataType:"json",success:function(a){d(a)}})},sorter:function(a,b,c){var d,e,f,g;if(!a)return b;for(g=[],e=0,f=b.length;f>e;e++)d=b[e],d.atwho_order=d[c].toLowerCase().indexOf(a),d.atwho_order>-1?g.push(d):Ibos.matchSpell(a,d[c])&&(d.atwho_order=1e4,g.push(d));return g.sort(function(a,b){return a.atwho_order-b.atwho_order})}}},c);try{a.atwho(opts)}catch(d){}},intro:function(a,c){var d;return"undefined"==typeof introJs&&b.error("Ibos.intro: 未引入intro.js"),d=introJs(),d.setOptions({steps:a,showStepNumbers:!1,tooltipClass:"ibosintro",prevLabel:"",nextLabel:"",skipLabel:"",doneLabel:""}),c&&(d.oncomplete(c),d.onexit(c)),d.start(),d}}),b.extend(Ibos,function(){var c=!1,d=function(){c=!1},e=function(a,c){var d=function(a){a.addListener("contentChange",function(){c&&c()})};if("undefined"!=typeof UE&&!b.isEmptyObject(UE.instants))for(var e in UE.instants)UE.instants[e].isReady?b.contains(a[0],UE.instants[e].iframe)&&d(UE.instants[e]):UE.instants[e].addListener("ready",function(){b.contains(a[0],UE.instants[e].iframe)&&d(UE.instants[e])})},f=function(d,f,g){f=f||"离开页面后，未保存的数据将丢失",g=g===!1?!1:!0,d=d&&d.length?d:b(document.body);var h="input,textarea,select";g&&e(d,function(){c=!0}),d.on("change",h,function(){var a="undefined"!=typeof b.attr(this,"data-nocheck");!a&&(c=!0)}),b("form").on("submit",function(){c=!1}),b(document).on("click","a[href='javascript:;'], a[href='javascript:void(0);']",function(a){a.preventDefault()}),b(a).on("beforeunload",function(){return c?f:void 0})};return{ignoreFormChange:d,triggerFormChange:function(){c=!0},checkFormChange:f}}())}(window,window.jQuery),function(a,b){var c=function(a,b){this.$element=a,this.options=b};c.prototype={constructor:c,addRow:function(a,c){if(a&&a.length)for(var d=0;d<a.length;d++)this.addRow(a[d],c);else{a&&(a.id=this.getRowsNum()+1);var e=this.options.tplid,f=b.tmpl(e,a);this.$element.append(f),c&&c(f,this.$element)}},removeRow:function(a,b){var c;c=a&&"number"==typeof a?this.$element.find("tr").eq(a):a,c.remove(),b&&b(c,this.$element)},reorderRows:function(){for(var a=this.$element.find("[data-toggle='badge']"),b=0,c=a.length;c>b;b++)a.eq(b).html(b+1)},getRowsNum:function(){return this.$element.find("[data-toggle='badge']").length}},Ibos.HandyTable=c}(window,window.jQuery),function(a,b){b.fn.search=function(a,c){return this.each(function(){var d=b(this),e=d.next(),f=d.closest(".search"),g=!1;c&&(g=!0,f.addClass("search-config"));var h=function(){var b=d.val();b&&(a?a(b):d[0].form.submit())},i=function(){var a=d.val();c&&c(a)};d.on({keydown:function(a){13===a.which&&h()},focus:function(){g=!1,f.addClass("has-focus")},blur:function(){var a=b(this).val();""===b.trim(a)&&(g=!0,setTimeout(function(){f.removeClass("has-focus")},200))}}),e.on("click",function(){g?i():h()})})}}(window,window.jQuery),function(a,b){b.blink=function(a,c,d){c=c||3,d=d||100;var e,f=0,g=!1,h="#FCC",i="#F99";e=setInterval(function(){g?(b.style(a,"background-color",""),b.style(a,"border-color",""),g=!1):(b.style(a,"background-color",h),b.style(a,"border-color",i),g=!0),f++,f>=2*c&&clearInterval(e)},d),a.focus()},b.fn.blink=function(a,c){return this.each(function(){b.blink(this,a,c)})}}(window,window.jQuery),$.fn.showModal=function(a){var b=$.extend($.fn.showModal.defaults,a);return this.each(function(){var a,c=$(this),d=c.data("modal");d||(a=c.css("position"),"fixed"!==a&&"absolute"!==a&&"relative"!==a&&c.css("position","relative"),d=$('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #FFF; opacity: .7; filter: Alpha(opacity=70)"></div>').hide(),d.css(b).appendTo(c).fadeIn(200).on("mousedown",function(a){a.stopPropagation(),a.preventDefault()}),c.data("modal",d))})},$.fn.showModal.defaults={backgroundColor:"#FFF",opacity:".7",zIndex:2e3},$.fn.hideModal=function(){return this.each(function(){var a=$(this);$modal=a.data("modal"),$modal&&($modal.fadeOut(200,function(){$modal.remove()}),a.removeData("modal"))})},$.fn.waiting=function(a,b,c){if(a===!1)return this.stopWaiting();a=a||"",b=b||"normal";var d={normal:'<div><img src="'+Ibos.app.getStaticUrl("/image/loading.gif")+'" width="60" height="60" /><span style="margin-left: 10px; font-size: 16px;">'+a+"</span></div>",small:'<div><img src="'+Ibos.app.getStaticUrl("/image/loading_small.gif")+'" width="24" height="24" /><span style="margin-left: 10px;  font-size: 14px;">'+a+"</span></div>",mini:'<div><img src="'+Ibos.app.getStaticUrl("/image/loading_mini.gif")+'" width="16" height="16" /><span style="margin-left: 10px;  font-size: 12px;">'+a+"</span></div>"};return a=d[b]||a||"Loading...",this.each(function(){var b=$(this),d=b.data("waiting");c&&b.showModal(),d?d.html(a).position({of:b}):(d=$("<div style='position: absolute; width: 300px; text-align: center; overflow: hidden;'></div>").html(a).appendTo(b.parent()).position({of:b}),b.data("waiting",d))})},$.fn.waitingC=function(a,b){return this.waiting(a,"normal",b)},$.fn.stopWaiting=function(){return this.each(function(){var a=$(this),b=a.data("waiting");a.hideModal(),b&&(b.remove(),a.removeData("waiting"))})},$.fn.noSelect=function(a){return this.each((null==a?!0:a)?function(){$.browser.msie||$.browser.safari?$(this).bind("selectstart",function(){return!1}):$.browser.mozilla?($(this).css("MozUserSelect","none"),$("body").trigger("focus")):$.browser.chrome?($(this).css("WebkitUserSelect","none"),$("body").trigger("focus")):$.browser.opera?$(this).bind("mousedown",function(){return!1}):$(this).attr("unselectable","on")}:function(){$.browser.msie||$.browser.safari?$(this).unbind("selectstart"):$.browser.mozilla?$(this).css("MozUserSelect","inherit"):$.browser.chrome?$(this).css("WebkitUserSelect","inherit"):$.browser.opera?$(this).unbind("mousedown"):$(this).removeAttr("unselectable","on")})},$.fn.ajaxPopover=function(a,b,c){return this.each(function(){var d=$(this),e="loading...",f=!1,g=$.extend({content:e,placement:"bottom",html:!0},c);d.popover(g).on("show",function(){var c=d.data("popover");f||$.when($.get(a,function(a){c.options.content=a,f=!0,c.show()})).then(function(){b&&(c.options.content=e,f=!1)})})})},$.fn.bindEvents=function(a,b){return a=a||{},b=b===!1?!1:!0,this.each(function(){var c,d,e,f;for(c in a)d=c.split(/\s+/),e=d[0],f=d[1],b?$(this).on(e,f,a[c]):$(f,this).on(e,a[c])})},Ibos.List=function(){var a=function(){var a=0;return function(){return a++}}(),b=function(a,c,d){this.$elem=Dom.getElem(a,!0),this.tpl=c,this.options=$.extend({},b.defaults,d),this._dataCache=[],this._itemCache={}};return b.defaults={idField:"id"},b.prototype={constructor:b,indexOf:function(a){for(var b=0;b<this._dataCache.length;b++)if(this._dataCache[b][this.options.idField]==a)return b;return-1},hasId:function(a){return-1!==this.indexOf(a)},_assignId:function(b){var c,d=this.options.idField;if(b[d])this.hasId(b[d])&&$.error("Ibos.List._assignId: "+c+"重复");else{if(c=a(),this.hasId(c))return this._assignId(b);b[d]=c}return b},_cleanData:function(a){return delete a[this.options.idField],a},_createItem:function(a){return $.tmpl(this.tpl,a)},addItem:function(a,b){var c,d,e=$(),f=b?"prependTo":"appendTo";a=$.isArray(a)?a:[a];for(var g=0;g<a.length;g++)d=this._assignId(a[g]),c=this._createItem(d),c&&c.length&&(this._itemCache[d[this.options.idField]]=c,this._addItemData(d),e=e.add(c[f](this.$elem)),this.$elem.trigger("list.add",{item:c,data:d}));return e},updateItem:function(a,b){var c,d,e,f;if(null==a)return null;if("string"==typeof a||"number"==typeof a)d=this._updateItemData(a,b),d&&(e=this.getItem(a),f=this._createItem(d),e.replaceWith(f),this._itemCache[a]=f),this.$elem.trigger("list.update",{item:f,data:d}),c=f;else{b=$.isArray(a)?a:[a],c=$();for(var g=0;g<b.length;g++)c=c.add(this.updateItem(b[g][this.options.idField],b[g]))}return c},removeItem:function(a){for(var b=(""+a).split(","),c=0;c<b.length;c++)this._removeItemData(b[c])&&(this._itemCache[b[c]].remove(),delete this._itemCache[b[c]],this.$elem.trigger("list.remove"))},getItem:function(a){var b;if(U.isUnd(a)){b=$();for(var c in this._itemCache)this._itemCache.hasOwnProperty(c)&&(b=b.add(this._itemCache[c]))}else b=this._itemCache[a];return b},_addItemData:function(a){this._dataCache.push(a)},_updateItemData:function(a,b){var c=this.getItemData(a);return c?$.extend(c,this._cleanData(b)):!1},_removeItemData:function(a){var b=this.indexOf(a);return-1!==b?(this._dataCache.splice(b,1),!0):!1},getItemData:function(a){var b;return U.isUnd(a)?this._dataCache:(b=this.indexOf(a),-1!==b?this._dataCache[b]:null)},clear:function(){for(var a=0;a<this._dataCache.length;a++)this.removeItem(this._dataCache[a--][this.options.idField])}},b}(),Ibos.OrderList=function(a,b,c){c={}||c,c.reorder=c.reorder===!1?!1:!0,this._super.call(this,a,b,c),this.index=this.options.startIndex=this.options.startIndex||1},Ibos.core.inherits(Ibos.OrderList,Ibos.List),Ibos.OrderList.prototype.addItem=function(a,b){return a=$.extend({index:this.index},a),this.index++,this._super.prototype.addItem.call(this,a,b)},Ibos.OrderList.prototype.removeItem=function(){var a=this._super.prototype.removeItem.apply(this,arguments);return this.options.reorder&&this.reorder(),a},Ibos.OrderList.prototype.reorder=function(){var a=this.getItemData();this.index=this.options.startIndex;for(var b=0;b<a.length;b++)this.getItem(a[b][this.options.idField]).find("[data-item-index]").attr("data-item-index",this.index).text(this.index++)},$(document).on("change","input[type='checkbox']",function(a,b){if(b&&b.outloop)return!1;var c,d=$.attr(this,"data-name"),e=this.checked;d?$('[name="'+d+'"], [data-check="'+d+'"]').prop("checked",e).trigger("change",{outloop:!0}):(c=$.attr(this,"data-check")||$.attr(this,"name"),c&&(e||$('[data-name="'+c+'"]').prop("checked",!1).trigger("change",{outloop:!0})))});